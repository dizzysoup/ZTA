# ------------------------------------------------------------
# kong.ztasecurity.duckdns.org
# ------------------------------------------------------------


server {
  set $forward_scheme http;
  set $server         "192.168.36.4";
  set $port           8000;

  listen 80;
listen [::]:80;

listen 443 ssl http2;
listen [::]:443 ssl http2;


  server_name kong.ztasecurity.duckdns.org;


  # Let's Encrypt SSL
  include conf.d/include/letsencrypt-acme-challenge.conf;
  include conf.d/include/ssl-ciphers.conf;
  ssl_certificate /etc/letsencrypt/live/npm-29/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/npm-29/privkey.pem;














  access_log /data/logs/proxy-host-2_access.log proxy;
  error_log /data/logs/proxy-host-2_error.log warn;



  location / {
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $remote_addr;
    proxy_set_header X-Real-IP		$remote_addr;
    proxy_pass       http://192.168.36.4:8000;

    

    
    
    

    



    


    location / {  
    add_header Access-Control-Allow-Origin 'https://frontend.ztasecurity.duckdns.org' always ;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
    add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';
    if ($request_method = 'OPTIONS') {
        return 204;
    }

} 
  }





  # Custom
  include /data/nginx/custom/server_proxy[.]conf;
}

